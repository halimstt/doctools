(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(r){if(r.ep)return;r.ep=!0;const t=i(r);fetch(r.href,t)}})();const L="modulepreload",x=function(e){return"/"+e},g={},k=function(n,i,l){let r=Promise.resolve();if(i&&i.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=o?.nonce||o?.getAttribute("nonce");r=u(i.map(c=>{if(c=x(c),c in g)return;g[c]=!0;const d=c.endsWith(".css"),a=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${a}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":L,d||(m.as="script"),m.crossOrigin="",m.href=c,s&&m.setAttribute("nonce",s),document.head.appendChild(m),d)return new Promise((f,v)=>{m.addEventListener("load",f),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function t(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return r.then(o=>{for(const s of o||[])s.status==="rejected"&&t(s.reason);return n().catch(t)})};let p=null,y=null;async function A(){if(p&&y)return p;const[e,n]=await Promise.all([k(()=>import("./pdf-TgmcrJJE.js"),[]),k(()=>import("./pdf.worker.min-CYwALx2b.js"),[])]);return e.GlobalWorkerOptions.workerSrc=n.default,p=e,y=n.default,p}function w(){return localStorage.getItem("geminiApiKey")||""}function E(e){localStorage.setItem("geminiApiKey",e)}function I(){return new Promise(e=>{const n=document.getElementById("shared-api-key-modal"),i=document.getElementById("shared-api-key-input"),l=document.getElementById("shared-api-key-save-btn"),r=document.getElementById("shared-api-key-cancel-btn");if(!n||!i||!l||!r){e(null);return}i.value=w(),n.showModal();const t=()=>{const s=i.value.trim();s?(E(s),n.close(),l.removeEventListener("click",t),r.removeEventListener("click",o),e(s)):h("warning","Please enter a valid Gemini API key.")},o=()=>{n.close(),l.removeEventListener("click",t),r.removeEventListener("click",o),e(null)};l.addEventListener("click",t),r.addEventListener("click",o),n.addEventListener("click",s=>{s.target===n&&o()})})}function h(e,n,i=null){const l=document.getElementById("toast-container");if(!l)return;let r=i;if(r===null){const d=n.split(/\s+/).filter(a=>a.length>0).length;r=Math.max(5e3,d/2*1e3)}const t=document.createElement("div");t.className="alert cursor-pointer",e==="error"?t.classList.add("alert-error"):e==="success"?t.classList.add("alert-success"):e==="warning"?t.classList.add("alert-warning"):e==="info"&&t.classList.add("alert-info");const o=document.createElement("span");o.textContent=n,t.appendChild(o),l.appendChild(t);let s=setTimeout(()=>{t.remove()},r);t.addEventListener("click",()=>{clearTimeout(s),t.remove()})}function P(){const e=document.getElementById("toast-container");if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function C(e,n,i,l,r){const t=document.getElementById("confirmationModal"),o=document.getElementById("confirmationModalTitle"),s=document.getElementById("confirmationModalText"),u=document.getElementById("confirmActionButton"),c=document.getElementById("cancelConfirmationButton");if(!t||!o||!s||!u||!c){h("error",`${e}
${n}`),l();return}u.onclick=null,c.onclick=null;const d=()=>{t.close(),u.removeEventListener("click",d),c.removeEventListener("click",a),t.removeEventListener("click",m),l()},a=()=>{t.close(),u.removeEventListener("click",d),c.removeEventListener("click",a),t.removeEventListener("click",m),r()},m=f=>{f.target===t&&a()};o.textContent=e,s.textContent=n,u.textContent=i,u.addEventListener("click",d),c.addEventListener("click",a),t.addEventListener("click",m),t.showModal()}function D(){const e=document.getElementById("confirmationModal");e&&e.open&&e.close()}function N(e,n,i){if(!e||e.length===0)return;const l=c=>{if(c==null)return"";let d=String(c);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d},t=[n.map(l).join(","),...e.map(c=>n.map(d=>{const a=c[d];if(d==="Amount"||d==="Total Amount"){const m=typeof a=="number"?a.toFixed(2):String(a||"").replace(/,/g,"");return l(m)}return l(a)}).join(","))].join(`
`),o=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),u=URL.createObjectURL(o);s.setAttribute("href",u),s.setAttribute("download",i),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(u)}function B(e){if(e){if(e.match(/^\d{2}\/\d{2}\/\d{4}$/)){const[n,i,l]=e.split("/");return new Date(`${l}-${i}-${n}`).getTime()}if(e.match(/^\d{2}\/\d{2}\/\d{2}$/)){const[n,i,l]=e.split("/"),r=new Date().getFullYear(),t=parseInt(l,10)+(parseInt(l,10)>r%100+20?1900:2e3);return new Date(`${t}-${i}-${n}`).getTime()}if(e.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(e).getTime()}try{const n=new Date(e);return isNaN(n.getTime())?0:n.getTime()}catch{return 0}}function $(e){if(e===null||isNaN(e)||e==="-"||e==="Error"||e===void 0||String(e).trim()==="")return e==="Error"?"Error":"-";let n=parseFloat(e);return isNaN(n)?"-":n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function M(e){if(!e||e==="-"||e==="Error")return e;try{let n;if(e.match(/^\d{2}\/\d{2}\/\d{4}$/)){const t=e.split("/");n=new Date(t[2],t[1]-1,t[0])}else e.match(/^\d{4}-\d{2}-\d{2}$/)?n=new Date(e):n=new Date(e);if(isNaN(n.getTime()))return e;const i=String(n.getDate()).padStart(2,"0"),l=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getFullYear());return`${i}/${l}/${r}`}catch{return e}}function S(e,n){return n>-1&&n<e.length&&e.splice(n,1),e}function T(e){return Array.from(e).filter(n=>n.type==="application/pdf")}function q(){h("info","Please select a document from the 'Extract' tab first to proceed.")}function j(e,n){const i={supplierName:null,documentDate:null,documentNumber:null,totalAmount:null},l=(r,t)=>{if(!t)return null;try{const o=new RegExp(t,"i"),s=r.match(o);return s?s[1]?s[1].trim():s[0].trim():null}catch(o){return console.error("Invalid regex pattern:",o),null}};if(n){i.supplierName=l(e,n.supplierNamePattern);let r=l(e,n.documentDatePattern);i.documentDate=r;let t=l(e,n.documentNumberPattern);t&&(t=t.replace(/\s*-\s*/g,"-").replace(/\s+/g,"").trim()),i.documentNumber=t;const o=l(e,n.totalAmountPattern);if(o){const s=o.replace(/[^0-9.]/g,""),u=parseFloat(s);isNaN(u)||(i.totalAmount=u)}}return i}function z(e,n){let i=[];const l=(t,o)=>{if(!o)return!1;try{return new RegExp(o,"i").test(t)}catch(s){return console.error("Invalid regex pattern for classification:",s),!1}};for(const t of n){let o=0;l(e,t.supplierNamePattern)&&(o+=4),l(e,t.documentNumberPattern)&&(o+=3),l(e,t.totalAmountPattern)&&(o+=2),l(e,t.documentDatePattern)&&(o+=1),o>0&&i.push({configName:t.name,score:o})}if(i.length===0)return{matchedConfigName:"None"};i.sort((t,o)=>o.score-t.score);const r=i[0];return r.score>=10?{matchedConfigName:r.configName}:{matchedConfigName:"None"}}function b(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),document.querySelectorAll(".theme-controller").forEach(i=>{i.value===e?(i.checked=!0,i.classList.remove("btn-ghost"),i.classList.add("btn-primary")):(i.checked=!1,i.classList.remove("btn-primary"),i.classList.add("btn-ghost"))})}document.addEventListener("DOMContentLoaded",()=>{const e=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","winter","summer","spring","business","acid","lemonade","night","coffee","dim","nord","sunset","caramellatte","abyss","silk","tenang","tron"],n=a=>{let m="";return e.forEach(f=>{const v=f.charAt(0).toUpperCase()+f.slice(1);m+=`
        <li>
          <input type="radio" name="${a}" class="theme-controller btn btn-md btn-block btn-ghost justify-start" aria-label="${v}" value="${f}"/>
        </li>
      `}),m},i=`
    <header class="navbar bg-base-100 shadow-sm">
      <div class="navbar-start">
        <a href="index.html" class="btn btn-ghost normal-case text-xl text-primary">Doctools</a>
      </div>
      <div class="navbar-center hidden md:flex">
        <ul class="menu menu-horizontal px-1">
          <li><a href="index.html" class="nav-link">Home</a></li>
          <li><a href="statement.html" class="nav-link">Statement</a></li>
          <li><a href="invoice.html" class="nav-link">Invoice</a></li>
          <li><a id="clear-gemini-key-btn-desktop" class="nav-link cursor-pointer">Clear Gemini</a></li>
        </ul>
      </div>
      <div class="navbar-end">
        <div class="dropdown dropdown-end hidden md:flex">
          <div tabindex="0" role="button" class="btn m-1">
            <div
              class="bg-base-100 group-hover:border-base-content/20 border-base-content/10 grid shrink-0 grid-cols-2 gap-0.5 rounded-md border p-1 transition-colors mr-2"
            >
              <div class="bg-base-content size-1 rounded-full"></div>
              <div class="bg-primary size-1 rounded-full"></div>
              <div class="bg-secondary size-1 rounded-full"></div>
              <div class="bg-accent size-1 rounded-full"></div>
            </div>
            Theme
          </div>
          <ul class="dropdown-content bg-base-300 rounded-box z-[999] w-52 p-2 shadow-2xl theme-list max-h-72 overflow-y-auto">
            ${n("theme-dropdown-desktop")}
          </ul>
        </div>

        <div class="dropdown dropdown-end md:hidden">
            <div tabindex="0" role="button" class="btn m-1">
              <div
                class="bg-base-100 group-hover:border-base-content/20 border-base-content/10 grid shrink-0 grid-cols-2 gap-0.5 rounded-md border p-1 transition-colors mr-2"
              >
                <div class="bg-base-content size-1 rounded-full"></div>
                <div class="bg-primary size-1 rounded-full"></div>
                <div class="bg-secondary size-1 rounded-full"></div>
                <div class="bg-accent size-1 rounded-full"></div>
              </div>
              Theme
            </div>
            <ul class="dropdown-content bg-base-300 rounded-box z-[999] w-52 p-2 shadow-2xl theme-list max-h-72 overflow-y-auto">
              ${n("theme-dropdown-mobile")}
            </ul>
        </div>
      </div>
    </header>
    <div class="dock md:hidden">
      <a href="index.html" class="dock-item">
        <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><polyline points="1 11 12 2 23 11" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2"></polyline><path d="m5,13v7c0,1.105.895,2,2,2h10c1.105,0,2-.895,2-2v-7" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></path><line x1="12" y1="22" x2="12" y2="18" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line></g></svg>
        <span class="dock-label">Home</span>
      </a>
      <a href="statement.html" class="dock-item">
        <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><polyline points="3 14 9 14 9 17 15 17 15 14 21 14" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2"></polyline><rect x="3" y="3" width="18" height="18" rx="2" ry="2" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></rect></g></svg>
        <span class="dock-label">Statement</span>
      </a>
      <a href="invoice.html" class="dock-item">
        <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><path d="m20,22h-16c-1.105,0-2-.895-2-2v-16c0-1.105.895-2,2-2h16c1.105,0,2,.895,2,2v16c0,1.105-.895,2-2,2Z" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></path><line x1="6" y1="8" x2="18" y2="8" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line><line x1="6" y1="12" x2="18" y2="12" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line><line x1="6" y1="16" x2="14" y2="16" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line></g></svg>
        <span class="dock-label">Invoice</span>
      </a>
      <a id="clear-gemini-key-btn-mobile" class="dock-item cursor-pointer">
        <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor" stroke-linejoin="miter" stroke-linecap="butt"><path d="m19,22h-14c-1.105,0-2-.895-2-2v-16c0-1.105.895-2,2-2h14c1.105,0,2,.895,2,2v16c0,1.105-.895,2-2,2Z" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></path><line x1="12" y1="6" x2="12" y2="18" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line><line x1="15" y1="9" x2="12" y2="6" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line><line x1="9" y1="9" x2="12" y2="6" fill="none" stroke="currentColor" stroke-linecap="square" stroke-miterlimit="10" stroke-width="2"></line></g></svg>
        <span class="dock-label">Clear Gemini</span>
      </a>
    </div>
  `,l=document.getElementById("nav-placeholder");l&&(l.outerHTML=i);const r=document.getElementById("clear-gemini-key-btn-desktop"),t=document.getElementById("clear-gemini-key-btn-mobile");w()!==""||(r&&r.classList.add("hidden"),t&&t.classList.add("hidden"));const s=()=>{C("Confirm Clear Gemini Key","Are you sure you want to clear your Gemini API key? You will need to re-enter it later to use Gemini features.","Clear Key",()=>{E(""),h("success","Gemini API key cleared successfully!"),r&&r.classList.add("hidden"),t&&t.classList.add("hidden")},()=>{h("info","Clearing Gemini API key cancelled.")})};r&&r.addEventListener("click",s),t&&t.addEventListener("click",s);const u=window.location.pathname.split("/").pop();document.querySelectorAll(".nav-link, .dock-item").forEach(a=>{a.getAttribute("href")&&a.getAttribute("href")===u?(a.classList.add("menu-active"),a.classList.add("dock-active")):(a.classList.remove("menu-active"),a.classList.remove("dock-active"))}),(()=>{const a=localStorage.getItem("theme");let m="light";a?m=a:window.matchMedia("(prefers-color-scheme: dark)").matches&&(m="dark"),b(m)})(),document.querySelectorAll(".theme-controller").forEach(a=>{a.addEventListener("change",m=>{b(m.target.value)})})});export{I as a,A as b,q as c,N as d,z as e,T as f,w as g,P as h,j as i,M as j,D as k,C as l,$ as m,B as p,S as r,h as s};
